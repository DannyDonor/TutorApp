{% extends "base.html" %}

{% block content %}
<h2>Админ-панель</h2>

<div class="row mb-4">
    <div class="col-md-4">
        <div class="card text-center">
            <div class="card-body">
                <h5 class="card-title">Студенты</h5>
                <p class="card-text fs-2">{{ students_count }}</p>
                <a href="{{ url_for('all_students') }}" class="btn btn-primary">Управление студентами</a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-center">
            <div class="card-body">
                <h5 class="card-title">Занятия</h5>
                <p class="card-text fs-2">{{ lessons_count }}</p>
                <a href="{{ url_for('all_lessons') }}" class="btn btn-primary">Управление занятиями</a>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card text-center">
            <div class="card-body">
                <h5 class="card-title">Домашние задания</h5>
                <p class="card-text fs-2">{{ homeworks_count }}</p>
                {# Здесь можно добавить ссылку на страницу со всеми ДЗ, если она есть #}
                {# Или на страницу, где можно просматривать ДЗ для каждого студента #}
                <a href="{{ url_for('all_students') }}" class="btn btn-primary">Просмотр ДЗ по студентам</a>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <h3>Последние занятия</h3>
        <ul class="list-group">
            {% for lesson in recent_lessons %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ lesson.student.full_name }} - {{ lesson.date_time.strftime('%d.%m.%Y %H:%M') }} ({{ lesson.status }})
                    <a href="{{ url_for('edit_lesson', lesson_id=lesson.id) }}" class="btn btn-sm btn-outline-primary">Изменить</a>
                </li>
            {% else %}
                <li class="list-group-item">Нет недавних занятий.</li>
            {% endfor %}
        </ul>
    </div>
    <div class="col-md-6">
        <h3>Последние домашние задания</h3>
        <ul class="list-group">
            {% for homework in recent_homeworks %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ homework.student.full_name }} - "{{ homework.description }}" (Срок: {{ homework.due_date.strftime('%d.%m.%Y') if homework.due_date else 'Не указан' }}) - {{ 'Выполнено' if homework.is_completed else 'Не выполнено' }}
                    <a href="{{ url_for('edit_homework', homework_id=homework.id) }}" class="btn btn-sm btn-outline-primary">Изменить</a>
                </li>
            {% else %}
                <li class="list-group-item">Нет недавних домашних заданий.</li>
            {% endfor %}
        </ul>
    </div>
</div>

{% endblock %}